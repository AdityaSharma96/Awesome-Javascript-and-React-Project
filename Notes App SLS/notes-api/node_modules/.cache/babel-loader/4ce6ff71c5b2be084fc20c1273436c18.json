{"ast":null,"code":"import \"source-map-support/register\";\nimport handler from \"./libs/handler-lib\";\nimport dynamoDb from \"./libs/dynamodb-lib\";\nexport const main = handler(async (event, context) => {\n  const data = JSON.parse(event.body);\n  const params = {\n    TableName: process.env.tableName,\n    // 'Key' defines the partition key and sort key of the item to be updated\n    // - 'userId': Identity Pool identity id of the authenticated user\n    // - 'noteId': path parameter\n    Key: {\n      userId: event.requestContext.identity.cognitoIdentityId,\n      noteId: event.pathParameters.id\n    },\n    // 'UpdateExpression' defines the attributes to be  updated\n    // 'ExpressionAttributeValues' defines the value in the update expression\n    UpdateExpression: \"SET content = :content, attachment = :attachment\",\n    ExpressionAttributeValues: {\n      \":attachment\": data.attachment || null,\n      \":content\": data.content || null\n    },\n    // 'ReturnValues' specifies if and how to return the item's attributes,\n    // where ALL_NEW returns all attributes of the item after the update; you\n    // can inspect 'result' below to see how it works with different settings\n    ReturnValues: \"ALL_NEW\"\n  };\n  await dynamoDb.update(params);\n  return {\n    status: true\n  };\n});","map":{"version":3,"sources":["/home/yash/Documents/notes-app-api/update.js"],"names":["handler","dynamoDb","main","event","context","data","JSON","parse","body","params","TableName","process","env","tableName","Key","userId","requestContext","identity","cognitoIdentityId","noteId","pathParameters","id","UpdateExpression","ExpressionAttributeValues","attachment","content","ReturnValues","update","status"],"mappings":";AAAA,OAAOA,OAAP,MAAoB,oBAApB;AACA,OAAOC,QAAP,MAAqB,qBAArB;AAEA,OAAO,MAAMC,IAAI,GAAGF,OAAO,CAAC,OAAOG,KAAP,EAAcC,OAAd,KAA0B;AAClD,QAAMC,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWJ,KAAK,CAACK,IAAjB,CAAb;AACA,QAAMC,MAAM,GAAG;AACXC,IAAAA,SAAS,EAAEC,OAAO,CAACC,GAAR,CAAYC,SADZ;AAEX;AACA;AACA;AACAC,IAAAA,GAAG,EAAE;AACDC,MAAAA,MAAM,EACNZ,KAAK,CAACa,cAAN,CAAqBC,QAArB,CAA8BC,iBAF7B;AAGDC,MAAAA,MAAM,EAAEhB,KAAK,CAACiB,cAAN,CAAqBC;AAH5B,KALM;AAUX;AACA;AACAC,IAAAA,gBAAgB,EAAE,kDAZP;AAaXC,IAAAA,yBAAyB,EAAE;AACvB,qBAAelB,IAAI,CAACmB,UAAL,IAAmB,IADX;AAEvB,kBAAYnB,IAAI,CAACoB,OAAL,IAAgB;AAFL,KAbhB;AAiBX;AACA;AACA;AACAC,IAAAA,YAAY,EAAE;AApBH,GAAf;AAsBA,QAAMzB,QAAQ,CAAC0B,MAAT,CAAgBlB,MAAhB,CAAN;AACA,SAAO;AAAEmB,IAAAA,MAAM,EAAE;AAAV,GAAP;AACC,CA1BsB,CAApB","sourcesContent":["import handler from \"./libs/handler-lib\";\nimport dynamoDb from \"./libs/dynamodb-lib\";\n\nexport const main = handler(async (event, context) => {\n    const data = JSON.parse(event.body);\n    const params = {\n        TableName: process.env.tableName,\n        // 'Key' defines the partition key and sort key of the item to be updated\n        // - 'userId': Identity Pool identity id of the authenticated user\n        // - 'noteId': path parameter\n        Key: {\n            userId:\n            event.requestContext.identity.cognitoIdentityId,\n            noteId: event.pathParameters.id\n        },\n        // 'UpdateExpression' defines the attributes to be  updated\n        // 'ExpressionAttributeValues' defines the value in the update expression\n        UpdateExpression: \"SET content = :content, attachment = :attachment\",\n        ExpressionAttributeValues: {\n            \":attachment\": data.attachment || null,\n            \":content\": data.content || null\n        },\n        // 'ReturnValues' specifies if and how to return the item's attributes,\n        // where ALL_NEW returns all attributes of the item after the update; you\n        // can inspect 'result' below to see how it works with different settings\n        ReturnValues: \"ALL_NEW\"\n        };\n    await dynamoDb.update(params);\n    return { status: true };\n    });"]},"metadata":{},"sourceType":"module"}